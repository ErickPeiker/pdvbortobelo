<!DOCTYPE html>
<html ng-app="app">
<% include basic/header %>
<script type="text/javascript" src="/js/compra.js"></script>
<script type="text/javascript">
$(document).ready(function() {
	$('#caixa').addClass("active");
});
</script>
<body>
	<% include basic/navbar %>
	<div class="jumbotron" ng-controller="controlador" ng-init="init()"> 
		<div class="container-fluid">
			<form class="form-horizontal">
				<h3></h3>
				<div class="parte-cima">
					<div class="form-group">
						<label class="col-md-2 control-label" for="codigo">Produto:</label>
						<div class="col-md-2">
							<input class="form-control" 
									placeholder="Código Interno" 
									type="text" 
									ng-model="compra.codigoProduto" 
									ng-enter="pesquisaProduto()">
						</div>
						<div class="col-md-8">
							<input class="form-control" 
									placeholder="Descrição do produto" 
									type="text" 
									ng-model="compra.descricaoProduto" 
									ng-enter="pesquisaProduto()">
						</div>
					</div>

					<div class="form-group">
						<label for="tipo" class="col-md-2 control-label">Fornecedor:</label>
						<div class="col-md-10">
							<select ng-model="compra.fornecedor" ng-options="item.id as item.nome for item in fornecedores" class="form-control"></select>
						</div>
					</div>

					<div class="form-group">
						<label class="col-md-2 control-label" for="codigo">Valor de Compra:</label>
						<div class="col-md-2">
							<input class="form-control" id="codigo" ng-model="compra.precoCompra" format="number" zero-filter="true">
						</div>
						<label class="col-md-2 control-label" for="codigo">Valor de Venda:</label>
						<div class="col-md-2">
							<input class="form-control" id="codigo" ng-model="compra.precoUnitario" format="number" zero-filter="true">
						</div>
					</div>

					<div class="form-group">
						<label class="col-md-2 control-label" for="codigo">Quantidade:</label>
						<div class="col-md-2">
							<input class="form-control" id="codigo" ng-model="compra.quantidadeEstoque">
						</div>
					</div>

					<div class="form-group">
					 <div class="col-md-offset-2 col-md-10">
					 	<input class="btn btn-primary" value="Gravar" ng-click="salvar()"/>
						<input class="btn btn-default" value="Cancelar" ng-click="cancelar()"/>
					 </div>
				</div>
				</div>
			</form>
		</div>
		<div id="resultadoPodutos" class="modal fade">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
		          <span aria-hidden="true">&times;</span>
		        </button>
		        <h4 class="modal-title">Escolha o produto</h4>
		      </div>
		      <div class="modal-body">
		        	<div class="table-responsive">
						<table class="table table-bordered table-hover" ng-show="resultadoPesquisado.length > 0">
							<thead>
								<th>
									Codigo
								</th>
								<th>
									Item
								</th>
							</thead>
							<tr ng-repeat="produtoPesquisado in resultadoPesquisado" 
								ng-dblclick="adicionarItem(produtoPesquisado)">
								<td>
									<span ng-bind="produtoPesquisado.codigo"></span>
								</td>
								<td>
									<span ng-bind="produtoPesquisado.descricao"></span>
								</td>
							</tr>
						</table>
					</div>
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
		      </div>
		    </div>
		  </div>
		</div>
	</div>			
</body>